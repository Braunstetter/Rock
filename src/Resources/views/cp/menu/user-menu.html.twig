{% import '@Rock/macro/transition.twig' as transition %}

{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}

    <div class="dropdown-menu" id="user-nav" data-controller="braunstetter--rock--menu">

        <button type="button"
                id="menu-button"
                data-braunstetter--rock--menu-target="opener"
                aria-expanded="false" aria-haspopup="true" aria-label="{{ 'My user account'|trans }}"
                title="{{ 'My user account'|trans }}">

            <span class="user-picture">
                {{ source('@Rock/images/male_avatar.svg') }}
            </span>

            {{ source('@Rock/images/caret_down.svg') }}
        </button>

        <div role="menu"
             aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
             data-braunstetter--rock--menu-target="content" {{ transition.fadeInOut() }}>

            <div id="user-info">
                {{ app.user.userIdentifier }}
            </div>

            {% for entry in menu_results('user_menu') %}
                {% set path = entry.routeParameters ? path(entry.routeName, entry.routeParameters) : path(entry.routeName) %}

                <a href="{{ path }}" role="menuitem"
                   tabindex="-1" id="{{ "user-menu-item-#{loop.index}" }}">

                    {% if icon is defined %}
                        {{ source(icon) }}
                    {% endif %}

                    <span>{{ entry.label }}</span>
                </a>

            {% endfor %}


        </div>
    </div>

{% endif %}