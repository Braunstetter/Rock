services:
  _instanceof:
    Rock\Twig\Contracts\HookInterface:
      tags: [ 'rock.template_hook' ]

    Rock\Contracts\PluginInterface:
      tags: [ 'rock.plugin' ]

  Rock\Services\Plugins:
    arguments:
      - !tagged_iterator rock.plugin
    public: true

  Rock\Twig\Extension:
    tags: [ 'twig.extension' ]
    arguments: [ '@Rock\Twig\Renderer' ]
    public: true

  Rock\Twig\Renderer:
    arguments:
      - !tagged_iterator rock.template_hook
      - '@Twig_Environment'
    public: true

  Rock\Test\app\src\Rock:
    tags: ['rock.plugin']

  Rock\Test\app\src\RockWithCustomName:
    tags: ['rock.plugin']

  Rock\Test\app\src\Twig\MyHook:
    tags: [ 'rock.template_hook' ]
    arguments:
      [ '@Twig_Environment' ]

  Rock\Menu\MainMenu:
    arguments:
      - '@Rock\Services\Plugins'
    public: true